{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Detector</title>
    <link rel="stylesheet" href="{% static 'index.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <div class="nav">
        <div class="logo">
            TEAM_ELITE
        </div>
        <div class="navigation">
            <li>Home</li>
            <li onclick="window.location.href='#blog'">Blog</li>
            <li onclick="window.location.href='disease-detector.html'">Diease detector</li>
        </div>
    </div>
    <div class="section-1-container">
        <div class="section-1">
            <img src="{% static 'plants.webp' %}" alt="plants">
        </div>
    
    <div class="cointainer">
        <h1  class="head">Upload & Get solution</h1>
        <p>Upload diease plant and know what reason behind it with solution.</p>
        <button class="btn" onclick="window.location.href='disease-detector.html'">CLICK HERE</button>
    </div>
    </div>
    
    
    <h1 style="text-align: center;" class="how-head">
        How does it works
    </h1>
    <div  class="container-how">
        <div class="img-how">
            <img src="{%static 'img-box.jpg' %}" alt="Disease Plant" class="di-img" width="350px">
        </div>
        <div class="det-how">
            <p>1. When a user uploads an image, it is first <b>preprocessed.</b> </p>
            <p>2. The preprocessed image is then passed to the <b>TensorFlow model.</b> The model will then <b>classify the image</b> into one of the disease categories that it has been trained on.</p>
            <p>3. The model will output a <b>probability score for each disease category</b>.</p>
            <p>4. The category with the <b>highest probability score</b> is the one that the model predicts is present in the image.</p>
            <p>5. The site will then <b>display the predicted disease category, symptoms & management</b> to the user.</p>
        </div>
    </div>
    <div id="blog" class="blogs">
        <h1 style="text-align: center; text-decoration: underline;">Blogs</h1>
        <div class="blo">
            <div class="blog blog-1">
                <img src="{% static 'grape-disease.webp' %}" alt="grape disease">
                <h1>Grapes Disease</h1>
                <div class="bl-btn">
                    <button onclick="window.location.href='grape-disease.html'"class="btn-blog">Read more</button>
                </div>
            </div> 
            <div class="blog blog-2">
                <img src="{% static 'fungal attack.jpg' %}" alt="fungal attack">
                <h1>Fungal attack</h1>
                <div class="bl-btn">
                    <button onclick="window.location.href='fungal-disease.html'" class="btn-blog">Read more</button>
                </div>
            </div>
            <div class="blog blog-3">
                <img src="{% static 'Tomato-bacteria diease.webp' %}" alt="Tomato Bacteria">
                <h1>Tomato bacteria</h1>
                <div class="bl-btn">
                    <button onclick="window.location.href='tomato-bacteria.html'"  class="btn-blog">Read more</button>
                </div>
            </div>
        </div>
    </div>
    <footer>
        <p>Designed by <i>Chandru T, Dhanush Raj O & Naveen B</i></p>
    </footer>
    <style>
    
    .tick, #tick{
        height:28px;
        border-radius: 50%;
        border: 1px solid green;
        color: #fff;
        background-color: green;
    }
    </style>
</body>
    <script>
        const dropZone = document.getElementById('upload-container');
        const fileInput = document.getElementById('photo');
        // const p = document.getElementById("answer");

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.border = '2px dashed green';
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.style.border = '2px solid rgba(228, 10, 10, 0.39)';
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.border = '2px solid rgba(228, 10, 10, 0.39)';
            
            const droppedFile = e.dataTransfer.files[0];

        if (droppedFile) {
            fileInput.files = e.dataTransfer.files;
            handleFile(droppedFile);
            }
        });

        function handleFile(file) {
            let filee = file.name.split(".");
            let file_len = filee.length-1;
            
            const lastIndex = filee[file_len];

            if(lastIndex === "png"){
                p.style.color = "green";
                dropZone.style.border = '2px solid none';
                p.innerHTML = "Infectious plant diseases are caused by a pathogenic organism such as a fungus, bacterium, mycoplasma, virus, viroid, nematode, or parasitic flowering plant. An infectious agent is capable of reproducing within or on its host and spreading from one susceptible host to another.";
            }else{
                p.style.color = "green"
                p.innerHTML = "Infectious plant diseases are caused by a pathogenic organism such as a fungus, bacterium, mycoplasma, virus, viroid, nematode, or parasitic flowering plant. An infectious agent is capable of reproducing within or on its host and spreading from one susceptible host to another.";
            }
            console.log('File dropped:', file.name);
        }
    </script>
</html>